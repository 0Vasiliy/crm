import{s as ot,g as k,x as it,y as $,z as E,A as at,B as M,C as rt,D as ut,_ as Tt,a as Bt,u as Dt,c as S,E as nt,o as Vt,b as a,d as e,h as R,i as b,j as I,v as q,m as h,F as y,k as w,t as i,G as O,f as r,n as x}from"./index-CADAJg8v.js";import{u as Rt}from"./residents-B_YpIIFo.js";const Et=ot("utilities",()=>{const n=k([]),u=k(!1),o=k(null);return{utilities:n,loading:u,error:o,fetchUtilities:async()=>{u.value=!0,o.value=null;try{const c=await it($(E,"utilities"));n.value=c.docs.map(v=>{const p=v.data();return{id:v.id,name:p.name||"",buildingId:p.buildingId||"",unit:p.unit||"",rate:p.rate||0,status:p.status||"active",createdAt:p.createdAt||new Date().toISOString()}}),console.log("Loaded utilities:",n.value)}catch(c){throw o.value=c.message,console.error("Error loading utilities:",c),c}finally{u.value=!1}},addUtility:async c=>{try{const v={name:c.name.trim(),buildingId:c.buildingId,unit:c.unit.trim(),rate:parseFloat(c.rate),status:c.status||"active",createdAt:c.createdAt||new Date().toISOString()},B={id:(await at($(E,"utilities"),v)).id,...v};return n.value.push(B),console.log("Added new utility:",B),B}catch(v){throw o.value=v.message,console.error("Error adding utility:",v),v}},updateUtility:async(c,v)=>{try{const p={name:v.name.trim(),buildingId:v.buildingId,unit:v.unit.trim(),rate:parseFloat(v.rate),status:v.status,createdAt:v.createdAt,updatedAt:new Date().toISOString()},B=M(E,"utilities",c);await rt(B,p);const f=n.value.findIndex(U=>U.id===c);f!==-1&&(n.value[f]={...n.value[f],...p}),console.log("Updated utility:",{id:c,...p})}catch(p){throw o.value=p.message,console.error("Error updating utility:",p),p}},deleteUtility:async c=>{try{await ut(M(E,"utilities",c)),n.value=n.value.filter(v=>v.id!==c),console.log("Deleted utility:",c)}catch(v){throw o.value=v.message,console.error("Error deleting utility:",v),v}}}}),Ft=ot("invoices",{state:()=>({invoices:[],loading:!1,error:null}),actions:{async fetchInvoices(){this.loading=!0;try{console.log("Fetching invoices...");const n=await it($(E,"invoices"));this.invoices=n.docs.map(u=>{const o=u.data();return{id:u.id,buildingId:o.buildingId||"",apartmentId:o.apartmentId||"",residentId:o.residentId||"",period:o.period||{month:1,year:new Date().getFullYear()},services:o.services||{},buildingTotal:o.buildingTotal||0,apartmentTotal:o.apartmentTotal||0,totalDebt:o.totalDebt||0,total:o.total||0,status:o.status||"pending",createdAt:o.createdAt||new Date().toISOString()}}),console.log("Invoices fetched:",this.invoices)}catch(n){console.error("Error fetching invoices:",n),this.error=n.message}finally{this.loading=!1}},async addInvoice(n){try{console.log("Adding invoice:",n);const u=await at($(E,"invoices"),{buildingId:n.buildingId,apartmentId:n.apartmentId,residentId:n.residentId,period:n.period,services:n.services,buildingTotal:n.buildingTotal,apartmentTotal:n.apartmentTotal,totalDebt:n.totalDebt,total:n.total,status:"pending",createdAt:new Date().toISOString()}),o={id:u.id,...n};return this.invoices=[...this.invoices,o],console.log("Invoice added:",o),u.id}catch(u){throw console.error("Error adding invoice:",u),u}},async updateInvoice(n,u){try{console.log("Updating invoice:",n,u),await rt(M(E,"invoices",n),u);const o=this.invoices.findIndex(A=>A.id===n);o!==-1&&(this.invoices[o]={...this.invoices[o],...u})}catch(o){throw console.error("Error updating invoice:",o),o}},async deleteInvoice(n){try{console.log("Deleting invoice:",n),await ut(M(E,"invoices",n)),this.invoices=this.invoices.filter(u=>u.id!==n)}catch(u){throw console.error("Error deleting invoice:",u),u}},getInvoicesByBuilding(n){if(!n)return[];const u=this.invoices.filter(o=>o.buildingId===n);return console.log("Invoices for building",n,":",u),u},getInvoicesByApartment(n){if(!n)return[];const u=this.invoices.filter(o=>o.apartmentId===n);return console.log("Invoices for apartment",n,":",u),u},getInvoicesByResident(n){if(!n)return[];const u=this.invoices.filter(o=>o.residentId===n);return console.log("Invoices for resident",n,":",u),u},getTotalDebtByBuilding(n){const o=this.getInvoicesByBuilding(n).reduce((A,T)=>A+(T.total||0),0);return console.log("Total debt for building",n,":",o),o},getTotalDebtByApartment(n){const o=this.getInvoicesByApartment(n).reduce((A,T)=>A+(T.total||0),0);return console.log("Total debt for apartment",n,":",o),o},getTotalDebtByResident(n){const o=this.getInvoicesByResident(n).reduce((A,T)=>A+(T.total||0),0);return console.log("Total debt for resident",n,":",o),o},getTotalDebt(){const n=this.invoices.reduce((u,o)=>u+(o.total||0),0);return console.log("Total debt:",n),n}}}),_t={class:"utilities"},qt={class:"header"},Nt={class:"actions"},Ot={class:"filters"},xt={class:"search-box"},$t={class:"filter-options"},Mt=["value"],Lt={key:0,class:"utilities-list"},jt={key:0,class:"no-results"},Yt={key:1,class:"utilities-grid"},zt={class:"utility-header"},Gt={class:"utility-info"},Pt={class:"utility-actions"},Qt=["onClick"],Ht=["onClick"],Jt={key:1,class:"loading"},Kt={key:2,class:"modal"},Wt={class:"modal-content"},Xt={class:"form-group"},Zt={class:"form-group"},te=["value"],ee={class:"form-group"},se={class:"form-group"},le={class:"form-group"},ne={class:"form-group"},oe={key:3,class:"modal"},ie={class:"modal-content invoice-modal"},ae={class:"form-row"},re={class:"form-group"},ue=["value"],de={class:"form-group"},ve=["value"],ce={class:"form-group"},pe=["value"],me={class:"form-row"},ge={class:"form-group"},fe={class:"period-select"},Ie=["value"],be=["value"],ye={class:"services-list"},we={class:"service-info"},ke={class:"service-rate"},Ue=["onUpdate:modelValue","placeholder"],Se={class:"invoice-summary"},he={class:"summary-item"},Ae={class:"amount"},Ce={class:"summary-item"},Te={class:"amount"},Be={class:"summary-item"},De={class:"amount"},Ve={class:"summary-item total"},Re={class:"amount"},Ee={key:4,class:"invoices-section"},Fe={class:"invoice-filters"},_e={class:"form-group"},qe=["value"],Ne={key:0,class:"form-group"},Oe=["value"],xe={key:1,class:"form-group"},$e=["value"],Me={key:0,class:"invoices-list"},Le={class:"invoices-grid"},je={class:"invoice-header"},Ye={class:"invoice-actions"},ze=["onClick"],Ge=["onClick"],Pe={class:"invoice-info"},Qe={key:1,class:"invoices-list"},He={class:"invoices-grid"},Je={class:"invoice-header"},Ke={class:"invoice-actions"},We=["onClick"],Xe=["onClick"],Ze={class:"invoice-info"},ts={key:2,class:"invoices-list"},es={class:"invoices-grid"},ss={class:"invoice-header"},ls={class:"invoice-actions"},ns=["onClick"],os=["onClick"],is={class:"invoice-info"},as={__name:"Utilities",setup(n){const u=Bt(),o=Et(),A=Dt(),T=Rt(),C=Ft(),_=k(!1),c=k(!1),v=k(null),p=k(null),B=k(""),f=k(""),U=k(""),D=k(""),N=k(""),m=k({name:"",buildingId:"",unit:"",rate:"",status:"active",createdAt:new Date().toISOString().split("T")[0]}),d=k({buildingId:"",apartmentId:"",residentId:"",period:{month:new Date().getMonth()+1,year:new Date().getFullYear()},services:{}}),dt=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],vt=Array.from({length:5},(l,t)=>new Date().getFullYear()-t),ct=S(()=>o.utilities),K=S(()=>o.loading),L=S(()=>u.buildings),W=S(()=>ct.value.filter(l=>{const t=l.name.toLowerCase().includes(B.value.toLowerCase()),s=!f.value||l.buildingId===f.value,g=!N.value||l.status===N.value;return t&&s&&g})),X=l=>{const t=L.value.find(s=>s.id===l);return t?t.name:"Неизвестное здание"},j=l=>{const t=A.apartments.find(s=>s.id===l);return t?t.number:"Неизвестная квартира"},Y=l=>{const t=T.residents.find(s=>s.id===l);return t?`${t.lastName} ${t.firstName}`:"Неизвестный жилец"},F=l=>{if(!l)return"Дата не указана";try{return new Date(l).toLocaleDateString("ru-RU")}catch(t){return console.error("Error formatting date:",t),"Неверный формат даты"}},V=l=>{if(l==null)return"0.00";const t=typeof l=="string"?parseFloat(l):l;return isNaN(t)?"0.00":t.toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})},Z=S(()=>f.value?A.apartments.filter(l=>l.buildingId===f.value):[]),tt=S(()=>U.value?T.residents.filter(l=>l.apartmentId===U.value):[]),pt=()=>{_.value=!1,v.value=null,m.value={name:"",buildingId:"",unit:"",rate:"",status:"active",createdAt:new Date().toISOString().split("T")[0]}},mt=l=>{v.value=l,m.value={name:l.name,buildingId:l.buildingId,unit:l.unit,rate:l.rate,status:l.status,createdAt:l.createdAt?new Date(l.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]},_.value=!0},gt=async()=>{try{const l={name:m.value.name.trim(),buildingId:m.value.buildingId,unit:m.value.unit.trim(),rate:parseFloat(m.value.rate),status:m.value.status,createdAt:new Date(m.value.createdAt).toISOString()};v.value?(await o.updateUtility(v.value.id,l),console.log("Utility updated:",l)):(await o.addUtility(l),console.log("Utility added:",l)),_.value=!1,wt()}catch(l){console.error("Error saving utility:",l),alert("Ошибка при сохранении услуги: "+l.message)}},ft=async l=>{if(confirm("Вы уверены, что хотите удалить эту услугу?"))try{await o.deleteUtility(l)}catch(t){console.error("Error deleting utility:",t),alert("Ошибка при удалении услуги")}},et=()=>{c.value=!1,p.value=null,d.value={buildingId:"",apartmentId:"",residentId:"",period:{month:new Date().getMonth()+1,year:new Date().getFullYear()},services:{},status:"pending"}},It=()=>{d.value.apartmentId="",d.value.residentId=""},bt=()=>{d.value.residentId=""},yt=async()=>{try{if(!d.value.buildingId||!d.value.apartmentId||!d.value.residentId){alert("Пожалуйста, заполните все обязательные поля");return}if(Object.keys(d.value.services).length===0){alert("Пожалуйста, укажите количество хотя бы для одной услуги");return}const l={buildingId:d.value.buildingId,apartmentId:d.value.apartmentId,residentId:d.value.residentId,period:d.value.period,services:d.value.services,buildingTotal:st.value,apartmentTotal:G.value,totalDebt:P.value,total:lt.value,status:d.value.status||"pending"};p.value?(await C.updateInvoice(p.value.id,l),console.log("Invoice updated:",l)):(await C.addInvoice(l),console.log("Invoice added:",l)),await C.fetchInvoices(),et(),p.value=null,alert(p.value?"Счет успешно обновлен":"Счет успешно сохранен")}catch(l){console.error("Error saving invoice:",l),alert("Ошибка при сохранении счета: "+l.message)}},wt=()=>{m.value={name:"",buildingId:"",unit:"",rate:"",status:"active",createdAt:new Date().toISOString().split("T")[0]},v.value=null},z=()=>{},st=S(()=>{if(!d.value.buildingId)return 0;let l=0;for(const[t,s]of Object.entries(d.value.services)){const g=o.utilities.find(J=>J.id===t);g&&g.buildingId===d.value.buildingId&&(l+=g.rate*(s||0))}return l}),G=S(()=>{if(!d.value.apartmentId)return 0;let l=0;for(const[t,s]of Object.entries(d.value.services)){const g=o.utilities.find(J=>J.id===t);g&&(l+=g.rate*(s||0))}return l}),P=S(()=>d.value.apartmentId?C.getTotalDebtByApartment(d.value.apartmentId):0),lt=S(()=>G.value+P.value);nt(()=>d.value.services,()=>{console.log("Services updated, recalculating totals")},{deep:!0});const kt=S(()=>{if(!f.value)return[];const l=C.getInvoicesByBuilding(f.value);return console.log("Building invoices:",l),l}),Ut=S(()=>{if(!U.value)return[];const l=C.getInvoicesByApartment(U.value);return console.log("Apartment invoices:",l),l}),St=S(()=>{if(!D.value)return[];const l=C.getInvoicesByResident(D.value);return console.log("Resident invoices:",l),l}),ht=l=>{f.value=l,U.value="",D.value=""},At=l=>{U.value=l,D.value=""},Ct=l=>{D.value=l};nt(()=>C.invoices,l=>{console.log("Invoices updated:",l)},{deep:!0});const Q=l=>{p.value=l,d.value={buildingId:l.buildingId,apartmentId:l.apartmentId,residentId:l.residentId,period:l.period,services:{...l.services},status:l.status},c.value=!0},H=async l=>{if(confirm("Вы уверены, что хотите удалить этот счет?"))try{await C.deleteInvoice(l),await C.fetchInvoices()}catch(t){console.error("Error deleting invoice:",t),alert("Ошибка при удалении счета: "+t.message)}};return Vt(async()=>{try{console.log("Loading data..."),await o.fetchUtilities(),await u.fetchBuildings(),await A.fetchApartments(),await T.fetchResidents(),await C.fetchInvoices(),console.log("Data loaded successfully")}catch(l){console.error("Error loading data:",l),alert("Ошибка при загрузке данных: "+l.message)}}),(l,t)=>(r(),a("div",_t,[e("div",qt,[t[24]||(t[24]=e("h1",null,"Коммунальные услуги",-1)),e("div",Nt,[e("button",{class:"add-button",onClick:t[0]||(t[0]=s=>_.value=!0)},t[22]||(t[22]=[e("i",{class:"fas fa-plus"},null,-1),b(" Добавить услугу ")])),e("button",{class:"btn btn-success",onClick:t[1]||(t[1]=s=>c.value=!0)},t[23]||(t[23]=[e("i",{class:"fas fa-file-invoice"},null,-1),b(" Выставить счёт ")]))])]),e("div",Ot,[e("div",xt,[t[25]||(t[25]=e("i",{class:"fas fa-search"},null,-1)),I(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>B.value=s),type:"text",placeholder:"Поиск по услугам...",onInput:z},null,544),[[q,B.value]])]),e("div",$t,[I(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),onChange:z},[t[26]||(t[26]=e("option",{value:""},"Все дома",-1)),(r(!0),a(y,null,w(L.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.name),9,Mt))),128))],544),[[h,f.value]]),I(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>N.value=s),onChange:z},t[27]||(t[27]=[e("option",{value:""},"Все статусы",-1),e("option",{value:"active"},"Активные",-1),e("option",{value:"inactive"},"Неактивные",-1)]),544),[[h,N.value]])])]),K.value?(r(),a("div",Jt,t[34]||(t[34]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"Загрузка...",-1)]))):(r(),a("div",Lt,[W.value.length===0?(r(),a("div",jt,t[28]||(t[28]=[e("i",{class:"fas fa-search"},null,-1),e("p",null,"Ничего не найдено",-1)]))):(r(),a("div",Yt,[(r(!0),a(y,null,w(W.value,s=>(r(),a("div",{key:s.id,class:"utility-card"},[e("div",zt,[e("h3",null,i(s.name),1),e("span",{class:x(["status-badge",s.status])},i(s.status==="active"?"Активна":"Неактивна"),3)]),e("div",Gt,[e("p",null,[t[29]||(t[29]=e("i",{class:"fas fa-building"},null,-1)),b(" "+i(X(s.buildingId)),1)]),e("p",null,[t[30]||(t[30]=e("i",{class:"fas fa-calendar"},null,-1)),b(" "+i(F(s.createdAt)),1)]),e("p",null,[t[31]||(t[31]=e("i",{class:"fas fa-money-bill"},null,-1)),b(" "+i(V(s.rate))+" ₽/"+i(s.unit),1)])]),e("div",Pt,[e("button",{onClick:g=>mt(s),class:"edit-button"},t[32]||(t[32]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Qt),e("button",{onClick:g=>ft(s.id),class:"delete-button"},t[33]||(t[33]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Ht)])]))),128))]))])),_.value?(r(),a("div",Kt,[e("div",Wt,[e("h3",null,i(v.value?"Редактировать услугу":"Добавить услугу"),1),e("div",Xt,[t[35]||(t[35]=e("label",null,"Название",-1)),I(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.value.name=s),type:"text",required:""},null,512),[[q,m.value.name]])]),e("div",Zt,[t[37]||(t[37]=e("label",null,"Здание",-1)),I(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>m.value.buildingId=s),required:""},[t[36]||(t[36]=e("option",{value:""},"Выберите здание",-1)),(r(!0),a(y,null,w(O(u).buildings,s=>(r(),a("option",{key:s.id,value:s.id},i(s.name),9,te))),128))],512),[[h,m.value.buildingId]])]),e("div",ee,[t[39]||(t[39]=e("label",null,"Единица измерения",-1)),I(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>m.value.unit=s),required:""},t[38]||(t[38]=[e("option",{value:"кВт"},"кВт",-1),e("option",{value:"куб.м"},"куб.м",-1),e("option",{value:"шт"},"шт",-1),e("option",{value:"мес"},"мес",-1)]),512),[[h,m.value.unit]])]),e("div",se,[t[40]||(t[40]=e("label",null,"Тариф",-1)),I(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>m.value.rate=s),type:"number",step:"0.01",required:""},null,512),[[q,m.value.rate]])]),e("div",le,[t[41]||(t[41]=e("label",null,"Дата ввода",-1)),I(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>m.value.createdAt=s),type:"date",required:""},null,512),[[q,m.value.createdAt]])]),e("div",ne,[t[43]||(t[43]=e("label",null,"Статус",-1)),I(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>m.value.status=s),required:""},t[42]||(t[42]=[e("option",{value:"active"},"Активна",-1),e("option",{value:"inactive"},"Неактивна",-1)]),512),[[h,m.value.status]])]),e("div",{class:"modal-actions"},[e("button",{class:"btn btn-secondary",onClick:pt},"Отмена"),e("button",{class:"btn btn-primary",onClick:gt},"Сохранить")])])])):R("",!0),c.value?(r(),a("div",oe,[e("div",ie,[t[56]||(t[56]=e("h3",null,"Выставить счёт",-1)),e("div",ae,[e("div",re,[t[45]||(t[45]=e("label",null,"Здание",-1)),I(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>d.value.buildingId=s),onChange:It,required:""},[t[44]||(t[44]=e("option",{value:""},"Выберите здание",-1)),(r(!0),a(y,null,w(O(u).buildings,s=>(r(),a("option",{key:s.id,value:s.id},i(s.name),9,ue))),128))],544),[[h,d.value.buildingId]])]),e("div",de,[t[47]||(t[47]=e("label",null,"Квартира",-1)),I(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>d.value.apartmentId=s),onChange:bt,required:""},[t[46]||(t[46]=e("option",{value:""},"Выберите квартиру",-1)),(r(!0),a(y,null,w(Z.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.number),9,ve))),128))],544),[[h,d.value.apartmentId]])]),e("div",ce,[t[49]||(t[49]=e("label",null,"Жилец",-1)),I(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>d.value.residentId=s),required:""},[t[48]||(t[48]=e("option",{value:""},"Выберите жильца",-1)),(r(!0),a(y,null,w(tt.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.lastName)+" "+i(s.firstName),9,pe))),128))],512),[[h,d.value.residentId]])])]),e("div",me,[e("div",ge,[t[50]||(t[50]=e("label",null,"Период",-1)),e("div",fe,[I(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>d.value.period.month=s),required:""},[(r(),a(y,null,w(dt,(s,g)=>e("option",{key:g,value:g+1},i(s),9,Ie)),64))],512),[[h,d.value.period.month]]),I(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>d.value.period.year=s),required:""},[(r(!0),a(y,null,w(O(vt),s=>(r(),a("option",{key:s,value:s},i(s),9,be))),128))],512),[[h,d.value.period.year]])])])]),e("div",ye,[t[51]||(t[51]=e("h4",null,"Услуги",-1)),(r(!0),a(y,null,w(O(o).utilities,s=>(r(),a("div",{key:s.id,class:"service-item"},[e("div",we,[e("span",null,i(s.name),1),e("span",ke,i(V(s.rate))+" ₽/"+i(s.unit),1)]),I(e("input",{"onUpdate:modelValue":g=>d.value.services[s.id]=g,type:"number",placeholder:"Количество "+s.unit,min:"0",step:"0.01"},null,8,Ue),[[q,d.value.services[s.id]]])]))),128))]),e("div",Se,[e("div",he,[t[52]||(t[52]=e("span",null,"Сумма по дому:",-1)),e("span",Ae,i(V(st.value))+" ₽",1)]),e("div",Ce,[t[53]||(t[53]=e("span",null,"Сумма по квартире:",-1)),e("span",Te,i(V(G.value))+" ₽",1)]),e("div",Be,[t[54]||(t[54]=e("span",null,"Общий долг:",-1)),e("span",De,i(V(P.value))+" ₽",1)]),e("div",Ve,[t[55]||(t[55]=e("span",null,"Итого к оплате:",-1)),e("span",Re,i(V(lt.value))+" ₽",1)])]),e("div",{class:"modal-actions"},[e("button",{class:"btn btn-secondary",onClick:et},"Отмена"),e("button",{class:"btn btn-primary",onClick:yt},"Сохранить")])])])):R("",!0),K.value?R("",!0):(r(),a("div",Ee,[t[79]||(t[79]=e("h2",null,"Счета",-1)),e("div",Fe,[e("div",_e,[t[58]||(t[58]=e("label",null,"Здание",-1)),I(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>f.value=s),onChange:t[17]||(t[17]=s=>ht(s.target.value))},[t[57]||(t[57]=e("option",{value:""},"Выберите здание",-1)),(r(!0),a(y,null,w(L.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.name),9,qe))),128))],544),[[h,f.value]])]),f.value?(r(),a("div",Ne,[t[60]||(t[60]=e("label",null,"Квартира",-1)),I(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>U.value=s),onChange:t[19]||(t[19]=s=>At(s.target.value))},[t[59]||(t[59]=e("option",{value:""},"Выберите квартиру",-1)),(r(!0),a(y,null,w(Z.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.number),9,Oe))),128))],544),[[h,U.value]])])):R("",!0),U.value?(r(),a("div",xe,[t[62]||(t[62]=e("label",null,"Жилец",-1)),I(e("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>D.value=s),onChange:t[21]||(t[21]=s=>Ct(s.target.value))},[t[61]||(t[61]=e("option",{value:""},"Выберите жильца",-1)),(r(!0),a(y,null,w(tt.value,s=>(r(),a("option",{key:s.id,value:s.id},i(s.lastName)+" "+i(s.firstName),9,$e))),128))],544),[[h,D.value]])])):R("",!0)]),f.value?(r(),a("div",Me,[e("h3",null,"Счета по дому: "+i(X(f.value)),1),e("div",Le,[(r(!0),a(y,null,w(kt.value,s=>(r(),a("div",{key:s.id,class:"invoice-card"},[e("div",je,[e("h4",null,"Счет за "+i(F(s.period.month))+" "+i(s.period.year),1),e("div",Ye,[e("button",{onClick:g=>Q(s),class:"edit-button"},t[63]||(t[63]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ze),e("button",{onClick:g=>H(s.id),class:"delete-button"},t[64]||(t[64]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Ge),e("span",{class:x(["status-badge",s.status])},i(s.status==="pending"?"Ожидает оплаты":"Оплачен"),3)])]),e("div",Pe,[e("p",null,[t[65]||(t[65]=e("i",{class:"fas fa-calendar"},null,-1)),b(" "+i(F(s.period.month))+" "+i(s.period.year),1)]),e("p",null,[t[66]||(t[66]=e("i",{class:"fas fa-home"},null,-1)),b(" Кв. "+i(j(s.apartmentId)),1)]),e("p",null,[t[67]||(t[67]=e("i",{class:"fas fa-user"},null,-1)),b(" "+i(Y(s.residentId)),1)]),e("p",null,[t[68]||(t[68]=e("i",{class:"fas fa-money-bill"},null,-1)),b(" "+i(V(s.total))+" ₽",1)])])]))),128))])])):R("",!0),U.value?(r(),a("div",Qe,[e("h3",null,"Счета по квартире: "+i(j(U.value)),1),e("div",He,[(r(!0),a(y,null,w(Ut.value,s=>(r(),a("div",{key:s.id,class:"invoice-card"},[e("div",Je,[e("h4",null,"Счет за "+i(F(s.period.month))+" "+i(s.period.year),1),e("div",Ke,[e("button",{onClick:g=>Q(s),class:"edit-button"},t[69]||(t[69]=[e("i",{class:"fas fa-edit"},null,-1)]),8,We),e("button",{onClick:g=>H(s.id),class:"delete-button"},t[70]||(t[70]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Xe),e("span",{class:x(["status-badge",s.status])},i(s.status==="pending"?"Ожидает оплаты":"Оплачен"),3)])]),e("div",Ze,[e("p",null,[t[71]||(t[71]=e("i",{class:"fas fa-calendar"},null,-1)),b(" "+i(F(s.period.month))+" "+i(s.period.year),1)]),e("p",null,[t[72]||(t[72]=e("i",{class:"fas fa-user"},null,-1)),b(" "+i(Y(s.residentId)),1)]),e("p",null,[t[73]||(t[73]=e("i",{class:"fas fa-money-bill"},null,-1)),b(" "+i(V(s.total))+" ₽",1)])])]))),128))])])):R("",!0),D.value?(r(),a("div",ts,[e("h3",null,"Счета по жильцу: "+i(Y(D.value)),1),e("div",es,[(r(!0),a(y,null,w(St.value,s=>(r(),a("div",{key:s.id,class:"invoice-card"},[e("div",ss,[e("h4",null,"Счет за "+i(F(s.period.month))+" "+i(s.period.year),1),e("div",ls,[e("button",{onClick:g=>Q(s),class:"edit-button"},t[74]||(t[74]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ns),e("button",{onClick:g=>H(s.id),class:"delete-button"},t[75]||(t[75]=[e("i",{class:"fas fa-trash"},null,-1)]),8,os),e("span",{class:x(["status-badge",s.status])},i(s.status==="pending"?"Ожидает оплаты":"Оплачен"),3)])]),e("div",is,[e("p",null,[t[76]||(t[76]=e("i",{class:"fas fa-calendar"},null,-1)),b(" "+i(F(s.period.month))+" "+i(s.period.year),1)]),e("p",null,[t[77]||(t[77]=e("i",{class:"fas fa-home"},null,-1)),b(" Кв. "+i(j(s.apartmentId)),1)]),e("p",null,[t[78]||(t[78]=e("i",{class:"fas fa-money-bill"},null,-1)),b(" "+i(V(s.total))+" ₽",1)])])]))),128))])])):R("",!0)]))]))}},ds=Tt(as,[["__scopeId","data-v-4a6b0c61"]]);export{ds as default};
