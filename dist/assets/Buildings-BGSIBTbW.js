import{_ as x,a as q,g as p,c as C,o as U,b as n,d as t,h as M,i as g,j as i,v as m,F as S,k as E,t as u,l as I,m as L,f as o,n as $}from"./index-94aisbhc.js";const D={class:"buildings"},F={class:"header"},N={class:"filters"},T={class:"search-box"},j={key:0,class:"buildings-list"},z={key:0,class:"no-results"},A={key:1,class:"buildings-grid"},Q={class:"building-header"},_={class:"building-info"},G={class:"building-actions"},H=["onClick"],J=["onClick"],K={key:1,class:"loading"},O={key:2,class:"modal"},P={class:"modal-content"},R={class:"form-group"},W={class:"form-group"},X={class:"form-group"},Y={class:"form-group"},Z={class:"form-group"},h={class:"form-actions"},ss={__name:"Buildings",setup(ts){const r=q(),c=p(!1),d=p(!1),v=p(null),f=p(""),a=p({name:"",address:"",floors:"",apartmentsCount:"",status:"active"}),b=C(()=>r.buildings),y=C(()=>{if(!f.value)return b.value;const l=f.value.toLowerCase();return b.value.filter(s=>s.name.toLowerCase().includes(l)||s.address.toLowerCase().includes(l))}),B=l=>{v.value=l,a.value={name:l.name,address:l.address,floors:l.floors,apartmentsCount:l.apartmentsCount,status:l.status},d.value=!0},k=async()=>{try{const l={name:a.value.name,address:a.value.address,floors:parseInt(a.value.floors),apartmentsCount:parseInt(a.value.apartmentsCount),status:a.value.status};v.value?await r.updateBuilding(v.value.id,l):await r.addBuilding(l),d.value=!1,v.value=null,a.value={name:"",address:"",floors:"",apartmentsCount:"",status:"active"}}catch(l){console.error("Error saving building:",l),alert("Ошибка при сохранении дома: "+l.message)}},w=async l=>{if(confirm("Вы уверены, что хотите удалить этот дом?"))try{await r.deleteBuilding(l)}catch(s){console.error("Error deleting building:",s),alert("Ошибка при удалении дома: "+s.message)}};return U(async()=>{try{await r.fetchBuildings()}catch(l){console.error("Error loading buildings:",l),alert("Ошибка при загрузке домов: "+l.message)}}),(l,s)=>(o(),n("div",D,[t("div",F,[s[10]||(s[10]=t("h1",null,"Дома",-1)),t("button",{class:"add-button",onClick:s[0]||(s[0]=e=>d.value=!0)},s[9]||(s[9]=[t("i",{class:"fas fa-plus"},null,-1),g(" Добавить дом ")]))]),t("div",N,[t("div",T,[s[11]||(s[11]=t("i",{class:"fas fa-search"},null,-1)),i(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>f.value=e),type:"text",placeholder:"Поиск по домам...",onInput:s[2]||(s[2]=(...e)=>l.filterBuildings&&l.filterBuildings(...e))},null,544),[[m,f.value]])])]),c.value?(o(),n("div",K,s[18]||(s[18]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("p",null,"Загрузка...",-1)]))):(o(),n("div",j,[y.value.length===0?(o(),n("div",z,s[12]||(s[12]=[t("i",{class:"fas fa-search"},null,-1),t("p",null,"Ничего не найдено",-1)]))):(o(),n("div",A,[(o(!0),n(S,null,E(y.value,e=>(o(),n("div",{key:e.id,class:"building-card"},[t("div",Q,[t("h3",null,u(e.name),1),t("span",{class:$(["status-badge",{active:e.status==="active"}])},u(e.status==="active"?"Активен":"Неактивен"),3)]),t("div",_,[t("p",null,[s[13]||(s[13]=t("i",{class:"fas fa-map-marker-alt"},null,-1)),g(" "+u(e.address),1)]),t("p",null,[s[14]||(s[14]=t("i",{class:"fas fa-building"},null,-1)),g(" "+u(e.floors)+" этажей",1)]),t("p",null,[s[15]||(s[15]=t("i",{class:"fas fa-door-open"},null,-1)),g(" "+u(e.apartmentsCount)+" квартир",1)])]),t("div",G,[t("button",{onClick:V=>B(e),class:"edit-button"},s[16]||(s[16]=[t("i",{class:"fas fa-edit"},null,-1)]),8,H),t("button",{onClick:V=>w(e.id),class:"delete-button"},s[17]||(s[17]=[t("i",{class:"fas fa-trash"},null,-1)]),8,J)])]))),128))]))])),d.value?(o(),n("div",O,[t("div",P,[t("h2",null,u(v.value?"Редактировать дом":"Добавить дом"),1),t("form",{onSubmit:I(k,["prevent"])},[t("div",R,[s[19]||(s[19]=t("label",null,"Название",-1)),i(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.value.name=e),type:"text",required:""},null,512),[[m,a.value.name]])]),t("div",W,[s[20]||(s[20]=t("label",null,"Адрес",-1)),i(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.value.address=e),type:"text",required:""},null,512),[[m,a.value.address]])]),t("div",X,[s[21]||(s[21]=t("label",null,"Количество этажей",-1)),i(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>a.value.floors=e),type:"number",required:"",min:"1"},null,512),[[m,a.value.floors]])]),t("div",Y,[s[22]||(s[22]=t("label",null,"Количество квартир",-1)),i(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.value.apartmentsCount=e),type:"number",required:"",min:"1"},null,512),[[m,a.value.apartmentsCount]])]),t("div",Z,[s[24]||(s[24]=t("label",null,"Статус",-1)),i(t("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>a.value.status=e),required:""},s[23]||(s[23]=[t("option",{value:"active"},"Активен",-1),t("option",{value:"inactive"},"Неактивен",-1)]),512),[[L,a.value.status]])]),t("div",h,[t("button",{type:"button",onClick:s[8]||(s[8]=e=>d.value=!1)},"Отмена"),s[25]||(s[25]=t("button",{type:"submit"},"Сохранить",-1))])],32)])])):M("",!0)]))}},ls=x(ss,[["__scopeId","data-v-a8e597e9"]]);export{ls as default};
